可以用dp。
也可以用贪心，第一个肯定选，之后第二个除非一样，否则一定选，往后推，如果同方向，那就更新，答案一定不会差，如果反方向，就更新，同时答案加一。