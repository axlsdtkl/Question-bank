最大生成树+lca。
对于所有的最大载重路径，一定是在最大生成树上。
用kruskal完成最大生成树后，选一个点作为root进行dfs,然后求出每个点的倍增点，对于每个询问，由于树上的两点之间的路径是唯一的，故可以用lca求。