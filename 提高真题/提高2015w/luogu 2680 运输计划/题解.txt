要使最长时间尽量短，可以直接二分。
二分答案，暴力处理出图中所有需要减少的时间。接下来需要查找是否存在让一条边距离变0，使得所有超标的路线都能合格。如何找到这样的边，选出每条超标的路线，在树中相对应的头、尾、lca的位置打上+1，+1，-2的标记，然后对整个树做dfs，查找出哪些边所对应的子树包含了所有的非法路径，如果没有这样的边，则这个答案不行，答案需要扩大，如果有多条，则根据贪心法则，选取最大的变为0，验证当前答案是否有效即可。