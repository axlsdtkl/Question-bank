题目：每行只能选一个，每列不能选超过选的总数量的一半。

如果出现违规的情况，一定是最多只有一列，不可能两列的数量都超过总数的一半。
故可以用容斥原理，总的方案数（每行选不多于一个），减去违规的情况。
总的方案数可以用dp统计，g[i][j]表示到第i行，总共选了j个。
非法的状态用f[i][j][k]表示当前到第i行，当前这一列选了j个，剩下的其它列选了k个，这个复杂度是n^3*M。
可以优化，发现最后统计的是j>k的情况，具体的数量多少其实没有关系，故只需要两维，f[i][j]表示到第i行，当前列比剩下列的总数多j的情况。